<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>MediMirror - AI-Powered Healthcare</title>
	<link rel="stylesheet" href="/static/styles.css" />
</head>
<body class="landing-page">
	<nav class="landing-nav">
		<div class="nav-brand">
			<span class="heartbeat-icon">ğŸ’“</span>
			<span class="brand-text">MediMirror</span>
		</div>
		<div class="nav-links">
			<a href="/home" class="nav-link">Home</a>
			<a href="/quick-chat" class="nav-link">Quick Chat</a>
			<button id="resultsBtnNav" class="nav-link" style="display:none;background:none;border:none;cursor:pointer;color:inherit;font-size:inherit;padding:inherit;">ğŸ“Š Results</button>
		</div>
		<div id="authButtons" style="display:flex;gap:12px;align-items:center;">
			<a href="/login" class="nav-link" style="padding:8px 16px;">Login</a>
			<a href="/register" class="nav-cta-btn" style="text-decoration:none;">Register</a>
		</div>
		<div id="userGreeting" style="display:none;align-items:center;gap:12px;">
			<span id="userNameDisplay" style="color:var(--text);font-weight:500;"></span>
			<button id="logoutBtn" class="nav-link" style="padding:8px 16px;background:none;border:none;cursor:pointer;color:inherit;font-size:inherit;">Logout</button>
		</div>
	</nav>
	
	<main class="landing-main">
		<div class="landing-badge">
			<span class="badge-icon">âš¡</span>
			<span>AI-Powered Healthcare</span>
		</div>
		
		<h1 class="landing-headline">
			<span class="highlight-cyan" id="greetingText">Your Personal</span> Medical Assistant
		</h1>
		
		<p class="landing-subtitle">
			Instant preliminary assessments â€” interactive, private, and powered by AI. Not a replacement for medical professionals.
		</p>
		
		<div class="landing-cta-buttons">
			<a href="/quick-chat" class="cta-primary">Begin Assessment â†’</a>
			<button class="cta-secondary" onclick="document.getElementById('how-it-works').scrollIntoView({behavior: 'smooth'})">Learn How It Works</button>
		</div>
	</main>
	
	<section id="how-it-works" class="how-it-works">
		<h2>How It Works</h2>
		<div class="features-grid">
			<div class="feature-card">
				<div class="feature-icon">ğŸ’¬</div>
				<h3>Quick Chat</h3>
				<p>Chat with our AI assistant to get instant preliminary assessments and medical information.</p>
			</div>
			<div class="feature-card">
				<div class="feature-icon">ğŸ“š</div>
				<h3>Textbook Mode</h3>
				<p>Get information from verified medical textbooks and trusted sources.</p>
			</div>
			<div class="feature-card">
				<div class="feature-icon">ğŸŒ</div>
				<h3>Advanced Mode</h3>
				<p>Access the latest medical information from online sources and research.</p>
			</div>
		</div>
	</section>
	
	<script>
		// Check if user is logged in
		const token = localStorage.getItem('medassist_token');
		const authButtons = document.getElementById('authButtons');
		const userGreeting = document.getElementById('userGreeting');
		const userNameDisplay = document.getElementById('userNameDisplay');
		const greetingText = document.getElementById('greetingText');
		
		if(token){
			// User is logged in - hide login/register, show user greeting
			if(authButtons) authButtons.style.display = 'none';
			if(userGreeting) userGreeting.style.display = 'flex';
			
			// Get and display user name from registration
			const userName = localStorage.getItem('medassist_user_name');
			if(userName){
				if(userNameDisplay) userNameDisplay.textContent = `Welcome, ${userName}!`;
				if(greetingText) greetingText.textContent = `${userName}'s Personal`;
			} else {
				// If no name stored, show generic greeting
				if(userNameDisplay) userNameDisplay.textContent = 'Welcome!';
				if(greetingText) greetingText.textContent = 'Your Personal';
			}
			
			// Setup logout button
			const logoutBtn = document.getElementById('logoutBtn');
			if(logoutBtn){
				logoutBtn.onclick = () => {
					localStorage.clear();
					location.href = '/login';
				};
			}
			
			// User is logged in, show quick chat link
			document.querySelectorAll('a[href="/quick-chat"]').forEach(link => {
				link.style.display = 'inline-block';
			});
		} else {
			// User not logged in - show login/register buttons
			if(authButtons) authButtons.style.display = 'flex';
			if(userGreeting) userGreeting.style.display = 'none';
		}
		
		// Results button functionality
		const resultsBtnNav = document.getElementById('resultsBtnNav');
		function updateResultsBtnLanding(){
			try{
				const lastSession = localStorage.getItem('last_medassist_session');
				if(lastSession && resultsBtnNav){
					resultsBtnNav.style.display = 'inline-block';
					resultsBtnNav.onclick = ()=>{
						window.location.href = `/static/results.html?id=${encodeURIComponent(lastSession)}`;
					};
				} else if(resultsBtnNav){
					resultsBtnNav.style.display = 'none';
				}
			}catch(e){}
		}
		updateResultsBtnLanding();
		setInterval(updateResultsBtnLanding, 1200);
	</script>
</body>
</html>

